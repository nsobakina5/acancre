jQuery(document).ready(function(b){var l=b("body");b(".add-request-quote-button");var g=b(".widget_ywraq_list_quote"),m=b(".yith-ywraq-item-remove");b.fn.yith_ywraq_variations=function(){var a=b('[name|="product_id"]'),c=a.val(),d=b(".add-to-quote-"+c).find("a"),e=d.parents(".yith-ywraq-add-to-quote"),f=b('[name|="variation_id"]');f.on("change",function(){""==b(this).val()?d.parent().hide().removeClass("show"):b.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:"action=yith_ywraq_action&ywraq_action=variation_exist&variation_id="+
f.val()+"&product_id="+a.val(),success:function(c){!0===c.result?(d.parent().hide().removeClass("show"),0==b(".yith_ywraq_add_item_browse-list-"+a.val()).length&&(e.append('<div class="yith_ywraq_add_item_response-'+a.val()+' yith_ywraq_add_item_response_message">'+c.message+"</div>"),e.append('<div class="yith_ywraq_add_item_browse-list-'+a.val()+' yith_ywraq_add_item_browse_message"><a href="'+c.rqa_url+'">'+c.label_browse+"</a></div>"))):(b(".yith_ywraq_add_item_response-"+a.val()).remove(),b(".yith_ywraq_add_item_browse-list-"+
a.val()).remove(),d.parent().show().addClass("show"))}})})};l.hasClass("single-product")&&b.fn.yith_ywraq_variations();b(document).on("click",".add-request-quote-button",function(a){a.preventDefault();var c=b(this),d=c.parents(".yith-ywraq-add-to-quote");a="ac";if(0<c.parents("ul.products").length)var e=c.parents("li.product").find('input[name="add-to-cart"]'),f=c.parents("li.product").find('input[name="product_id"]');else e=c.parents(".product").find('input[name="add-to-cart"]'),f=c.parents(".product").find('input[name="product_id"]');
0<e.length&&0<f.length?a=b(".cart").serialize():0<e.length&&0<b(".cart").length?a=b(".cart").serialize():0==e.length&&0<b(".cart").length?a=b(".cart").serialize():0==e.length&&(a="quantity=1");a+="&action=yith_ywraq_action&ywraq_action=add_item&product_id="+c.data("product_id")+"&wp_nonce="+c.data("wp_nonce");0<a.indexOf("add-to-cart")&&(a=a.replace("add-to-cart","yith-add-to-cart"));b.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:a,beforeSend:function(){c.siblings(".ajax-loading").css("visibility",
"visible")},complete:function(){c.siblings(".ajax-loading").css("visibility","hidden")},success:function(a){if("true"==a.result||"exists"==a.result)if("yes"==ywraq_frontend.go_to_the_list)window.location.href=a.rqa_url;else{c.parent().hide().removeClass("show").addClass("addedd");var b="undefined"==typeof f.val()?"":"-"+f.val();d.append('<div class="yith_ywraq_add_item_response'+b+' yith_ywraq_add_item_response_message">'+a.message+"</div>");d.append('<div class="yith_ywraq_add_item_browse-list'+
b+' yith_ywraq_add_item_browse_message"><a href="'+a.rqa_url+'">'+a.label_browse+"</a></div>");g.length&&g.ywraq_refresh_widget()}else"false"==a.result&&d.append('<div class="yith_ywraq_add_item_response-'+f.val()+'">'+a.message+"</div>")}})});b.fn.ywraq_refresh_widget=function(){g.each(function(){var a=b(this),c=a.find(".yith-ywraq-list-widget-wrapper").data("instance");b.ajax({type:"POST",url:ywraq_frontend.ajaxurl,data:c+"&action=yith_ywraq_action&ywraq_action=refresh_quote_list",beforeSend:function(){a.find(".ajax-loading").css("visibility",
"visible");a.find(".yith-ywraq-list").css("opacity",.5)},complete:function(){a.find(".ajax-loading").css("visibility","hidden");a.find(".yith-ywraq-list").css("opacity",1)},success:function(b){a.find(".yith-ywraq-list-widget-wrapper").html(b)}})})};m.on("click",function(a){a.preventDefault();var c=b(this),d=c.data("remove-item");b("#yith-ywraq-form");a="";a="action=yith_ywraq_action&ywraq_action=remove_item&key="+c.data("remove-item")+"&wp_nonce="+c.data("wp_nonce")+"&product_id="+c.data("product_id");
b.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:a,beforeSend:function(){c.siblings(".ajax-loading").css("visibility","visible")},complete:function(){c.siblings(".ajax-loading").css("visibility","hidden")},success:function(a){1===a&&(b("[data-remove-item='"+d+"']").parents(".cart_item").remove(),0===b(".cart_item").length&&(b("#yith-ywraq-form, .yith-ywraq-mail-form-wrapper").remove(),b("#yith-ywraq-message").text(ywraq_frontend.no_product_in_list)),g.length&&g.ywraq_refresh_widget())}})});
var k="";b(document).find(".wpcf7").each(function(){var a=b(this);a.find('input[name="_wpcf7"]').val()==ywraq_frontend.cform7_id&&(a.on("form-pre-serialize",function(a,b,e,f){k=b.serialize()}),a.on("mailsent.wpcf7",function(){b.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:k+"&action=yith_ywraq_order_action&ywraq_order_action=create_order",success:function(a){""!=a.rqa_url&&(window.location.href=a.rqa_url)}})}))});b(".quotes-actions").find(".accept").on("click",function(a){if(b(this).hasClass("pay"))return!0;
a.preventDefault();var c=b(this);a="action=yith_ywraq_order_action&ywraq_order_action=accept_order&order_id="+c.parents(".quotes-actions").data("order_id");b.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:a,beforeSend:function(){c.siblings(".ajax-loading").css("visibility","visible")},complete:function(){c.siblings(".ajax-loading").css("visibility","hidden")},success:function(a){0!==a.result&&(window.location.href=a.rqa_url)}})});var h=b(".quotes-actions").find(".reject");b(".my_account_quotes");
h.prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1});h.on("click",function(a){a.preventDefault();a=b(this).parents(".quotes-actions").data("order_id");b("#modal-order-number").text(a);b(".reject-quote-modal-button").attr("data-order_id",a);h.prettyPhoto({hook:"data-rel",social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})});b(document).on("click",".close-quote-modal-button",function(a){a.preventDefault();
b.prettyPhoto.close()});b(document).on("click",".reject-quote-modal-button",function(a){a.preventDefault();a=b(this);var c=a.data("order_id");b("#modal-order-number");var d=a.closest("body").find(".my_account_quotes").find('[data-order_id="'+c+'"]').parent();b.ajax({type:"POST",url:ywraq_frontend.ajaxurl,dataType:"json",data:"action=yith_ywraq_order_action&ywraq_order_action=reject_order&order_id="+c,beforeSend:function(){d.find(".ajax-loading").css("visibility","visible")},complete:function(){d.find(".ajax-loading").css("visibility",
"hidden")},success:function(a){0!==a.result&&(d.find(".reject").hide(),d.find(".accept").hide(),d.find(".raq_status").removeClass("pending").addClass("rejected").text(a.status),b.prettyPhoto.close())}})})});
